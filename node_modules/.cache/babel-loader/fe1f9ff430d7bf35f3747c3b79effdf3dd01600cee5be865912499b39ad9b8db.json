{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import LoginPage from'./LoginPage';import DashboardPage from'./DashboardPage';import CryptoJS from'crypto-js';import AdminPage from'./AdminPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SECRET_KEY='your-secret-key';// Use a strong secret key\nfunction App(){// Function to encrypt the value\nconst encryptValue=value=>{return CryptoJS.AES.encrypt(value,SECRET_KEY).toString();};// Function to decrypt the value\nconst decryptValue=ciphertext=>{const bytes=CryptoJS.AES.decrypt(ciphertext,SECRET_KEY);return bytes.toString(CryptoJS.enc.Utf8);};// Initialize authentication state\nconst[isAuthenticated,setIsAuthenticated]=useState(()=>{const storedValue=localStorage.getItem('isAuthenticated');return storedValue?decryptValue(storedValue)==='true':false;});const[userPrivileges,setUserPrivileges]=useState();// Update localStorage whenever authentication state changes\nuseEffect(()=>{localStorage.setItem('isAuthenticated',encryptValue(isAuthenticated.toString()));},[isAuthenticated]);console.log(isAuthenticated);const[id,setId]=useState(null);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{setIsAuthenticated:setIsAuthenticated,setUserPrivileges:setUserPrivileges,setoutId:setId})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated&&userPrivileges===0?/*#__PURE__*/_jsx(DashboardPage,{id:id,setIsAuthenticated:setIsAuthenticated}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:isAuthenticated&&userPrivileges===1?/*#__PURE__*/_jsx(AdminPage,{setIsAuthenticated:setIsAuthenticated}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:isAuthenticated?userPrivileges===1?/*#__PURE__*/_jsx(Navigate,{to:\"/admin\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","LoginPage","DashboardPage","CryptoJS","AdminPage","jsx","_jsx","jsxs","_jsxs","SECRET_KEY","App","encryptValue","value","AES","encrypt","toString","decryptValue","ciphertext","bytes","decrypt","enc","Utf8","isAuthenticated","setIsAuthenticated","storedValue","localStorage","getItem","userPrivileges","setUserPrivileges","setItem","console","log","id","setId","children","path","element","setoutId","to"],"sources":["C:/Users/pc/Desktop/react projects/first project/first_project/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport LoginPage from './LoginPage';\nimport DashboardPage from './DashboardPage';\nimport CryptoJS from 'crypto-js';\nimport AdminPage from './AdminPage'\n\nconst SECRET_KEY = 'your-secret-key'; // Use a strong secret key\n\nfunction App() {\n  // Function to encrypt the value\n  const encryptValue = (value) => {\n    return CryptoJS.AES.encrypt(value, SECRET_KEY).toString();\n  };\n\n  // Function to decrypt the value\n  const decryptValue = (ciphertext) => {\n    const bytes = CryptoJS.AES.decrypt(ciphertext, SECRET_KEY);\n    return bytes.toString(CryptoJS.enc.Utf8);\n  };\n\n  // Initialize authentication state\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    const storedValue = localStorage.getItem('isAuthenticated');\n    return storedValue ? decryptValue(storedValue) === 'true' : false;\n  });\n  const [userPrivileges,setUserPrivileges] = useState();\n\n  // Update localStorage whenever authentication state changes\n  useEffect(() => {\n    localStorage.setItem('isAuthenticated', encryptValue(isAuthenticated.toString()));\n  }, [isAuthenticated]);\n  console.log(isAuthenticated);\n  \n  const [id, setId] = useState(null);\n\n\n  return (\n    \n    <Router>\n  <Routes>\n    <Route\n      path=\"/login\"\n      element={<LoginPage setIsAuthenticated={setIsAuthenticated} setUserPrivileges={setUserPrivileges} setoutId={setId} />}\n    />\n    <Route\n      path=\"/dashboard\"\n      element={isAuthenticated && userPrivileges === 0 ? (\n        <DashboardPage id={id} setIsAuthenticated={setIsAuthenticated}  />\n      ) : (\n        <Navigate to=\"/login\" />\n      )}\n    />\n    <Route\n      path=\"/admin\"\n      element={isAuthenticated && userPrivileges === 1 ? (\n        <AdminPage setIsAuthenticated={setIsAuthenticated} />\n      ) : (\n        <Navigate to=\"/login\" />\n      )}\n    />\n    {/* Default route */}\n    <Route\n      path=\"/\"\n      element={\n        isAuthenticated ? (\n          userPrivileges === 1 ? (\n            <Navigate to=\"/admin\" />\n          ) : (\n            <Navigate to=\"/dashboard\" />\n          )\n        ) : (\n          <Navigate to=\"/login\" />\n        )\n      }\n    />\n  </Routes>\n</Router>\n\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}